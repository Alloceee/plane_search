<!DOCTYPE html>
<html lang="" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <title>飞机航班查询信息系统</title>
    <link rel="stylesheet" id="css-main" href="/css/oneui.css">
    <link rel="stylesheet" href="/plugins/bootstrap-datepicker/bootstrap-datepicker3.min.css">
    <link rel="stylesheet" href="/plugins/slick/slick.min.css">
    <link rel="stylesheet" href="/plugins/slick/slick-theme.min.css">
    <link rel="stylesheet" href="/css/style.css"/>
</head>
<body>
<!-- 导航栏header -->
<div th:replace="/home/comm/header :: header"></div>
<!-- header end -->

<div class="container">
    <!-- 搜索区域 start -->
    <div th:replace="/home/comm/search :: search"></div>
    <!-- 搜索区域 end -->

    <!-- 国内航班信息 start -->
    <script id="china_plane" type="text/html">
        <h2 class="content-heading">国内航班信息</h2>
        <div class="content-grid push-50">
            <!-- Simple Tiles -->
            <div class="row">
                {{# layui.each( d, function(index, item){ }}
                <div class="col-lg-4">
                    <a class="block block-link-hover2" href="javascript:void(0)">
                        <div class="block-content block-content-full clearfix">
                            <div class="col-sm-8">
                                <div class="col-sm-12">
                                    <span class="text-muted">去：{{ item.startTime }}</span>
                                    <i class="fa fa-exchange"></i>
                                    <span class="text-muted">回：{{ item.endTime }}</span>
                                </div>
                                <div class="col-sm-12">
                                    <span class="h4 font-w700">{{ item.startCity }}</span>
                                    <i class="fa fa-exchange"></i>
                                    <span class="h4 font-w700">{{ item.endCity }}</span>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <span class="h2 font-w700 text-city">￥{{ item.price }}</span>
                            </div>
                        </div>
                    </a>
                </div>
                {{# }); }}
                {{# if(d.length === 0){ }}
                无数据
                {{# } }}
            </div>
            <!-- END Simple Tiles -->
        </div>
    </script>
    <div class="plane-show" id="china_plane_show"></div>
    <!-- 国内航班信息 end -->

    <!-- 国外航班信息 start -->
    <script id="abroad_plane" type="text/html">
        <h2 class="content-heading">国外航班信息</h2>
        <div class="content-grid push-50">
            <!-- Simple Tiles -->
            <div class="row">
                {{# layui.each( d, function(index, item){ }}
                <div class="col-lg-4">
                    <a class="block block-link-hover2" href="javascript:void(0)">
                        <div class="block-content block-content-full clearfix">
                            <div class="col-sm-8">
                                <div class="col-sm-12">
                                    <span class="text-muted">去：{{ item.startTime }}</span>
                                    <i class="fa fa-exchange"></i>
                                    <span class="text-muted">回：{{ item.endTime }}</span>
                                </div>
                                <div class="col-sm-12">
                                    <span class="h4 font-w700">{{ item.startCity }}</span>
                                    <i class="fa fa-exchange"></i>
                                    <span class="h4 font-w700">{{ item.endCity }}</span>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <span class="h2 font-w700 text-city">￥{{ item.price }}</span>
                            </div>
                        </div>
                    </a>
                </div>
                {{# }); }}
                {{# if(d.length === 0){ }}
                无数据
                {{# } }}
            </div>
            <!-- END Simple Tiles -->
        </div>
    </script>
    <div class="plane-show" id="abroad_plane_show"></div>
    <!-- 国外航班信息 end	-->
</div>

<!-- footer start -->
<div th:replace="/home/comm/footer :: footer"></div>
<!-- footer end -->

<!--返回顶部-->
<div class="scrollTop">></div>

<!-- 基础js应用 -->
<script src="/js/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/jquery.scrollLock.min.js"></script>
<script src="/js/jquery.appear.min.js"></script>
<script src="/js/jquery.countTo.min.js"></script>
<script src="/js/jquery.placeholder.min.js"></script>
<script src="/js/js.cookie.min.js"></script>
<script src="/js/app.js"></script>

<!-- 插件js应用 -->
<script src="/plugins/bootstrap-datepicker/bootstrap-datepicker.min.js"></script>
<script src="/plugins/slick/slick.min.js"></script>
<script src="/plugins/layui/layui.js"></script>

<script>
    layui.use('laytpl', function () {
        var laytpl = layui.laytpl,
            $ = layui.jquery;

        $.ajax({
            type: 'get',
            dataType: 'text',
            data: {
                startCity: "上海",
                endCity: '深圳'
            },
            url: '/china_plane',
            success: function (data) {
                //渲染模板数据
                var getTpl = china_plane.innerHTML
                    , view = document.getElementById('china_plane_show');
                laytpl(getTpl).render(JSON.parse(data), function (html) {
                    view.innerHTML = html;
                });
            }
        });

        $.ajax({
            type: 'get',
            dataType: 'text',
            data: {
                startCity: "上海",
                endCity: '深圳'
            },
            url: '/abroad_plane',
            success: function (data) {
                //渲染模板数据
                var getTpl = abroad_plane.innerHTML
                    , view = document.getElementById('abroad_plane_show');
                laytpl(getTpl).render(JSON.parse(data), function (html) {
                    view.innerHTML = html;
                });
            }
        });


        $(function () {
            // Init page helpers (BS Datepicker + BS Colorpicker + Select2 + Masked Input + Tags Inputs plugins)
            App.initHelpers(['datepicker', 'slick']);
            $('#china_change').on('click', function () {
                var china_start = $("#china_start").val();
                $("#china_start").val($('#china_end').val());
                $("#china_end").val(china_start);
            });
            $('#abroad_change').on('click', function () {
                var abroad_start = $("#abroad_start").val();
                $("#abroad_start").val($('#abroad_end').val());
                $("#abroad_end").val(abroad_start);
            });
            //获取ip地址
            $.ajax({
                url: 'http://api.map.baidu.com/location/ip?ak=ia6HfFL660Bvh43exmH9LrI6',
                type: 'POST',
                dataType: 'jsonp',
                success:function(data) {
                    console.log(data.content.address_detail.province + "," + data.content.address_detail.city);
                }
            });

        });
    });
</script>
</body>
</html>
